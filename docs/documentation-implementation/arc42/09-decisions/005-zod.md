# ADR-005 : Zod Validation

## Statut

Accepté (2024-12)

## Contexte

SkillSwap nécessite une validation robuste des données à plusieurs niveaux : formulaires frontend, requêtes API backend, et inférence de types TypeScript.

## Décision

**Zod** plutôt que Yup, Joi ou validation manuelle.

## Alternatives considérées

| Alternative      | Avantages              | Inconvénients                    |
| ---------------- | ---------------------- | -------------------------------- |
| Yup              | Mature, large adoption | Inférence TypeScript moins bonne |
| Joi              | Très complet           | Pas conçu pour TypeScript        |
| class-validator  | Intégration NestJS     | Nécessite des classes            |
| Validation manuelle | Aucune dépendance   | Verbeux, error-prone             |

## Conséquences

### Positives

- Types inférés automatiquement (`z.infer<typeof schema>`)
- Même schéma utilisable frontend et backend
- Messages d'erreur personnalisables et localisables
- Tree-shakable (bundle size minimal)

### Négatives

- Apprentissage de l'API Zod

## Exemple

```typescript
const registerSchema = z.object({
  email: z.string().email('Format email invalide'),
  password: z.string().min(8, 'Minimum 8 caractères'),
});

type RegisterInput = z.infer<typeof registerSchema>;
// { email: string; password: string }
```

---

[← Retour à l'index](./index.md)
